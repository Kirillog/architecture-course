# Roguelike
## Общие сведения о системе
Во время игровой сессии на экране отображается карта, на которой расположены клетки с секретами. 
Цель для прохождения уровня: найти клетку со спуском на следующий уровень
Цель игры: спуститься как можно ниже
## Роли и случаи использования
Типичный пользователь **Player** запускает игру и на его экране отображается карта текущего уровня. В рамках игровой сессии **Player** может выполнять следующие действия посредством ввода с клавиатуры:
* Переместить персонажа (**Move Character**) - на экране отображается новое расположение персонажа
* Исследовать клетку с секретом (**Open Hidden Cell**) - на экране отображается содержимое клетки с секретом: ничего; предмет, который можно подобрать и использовать (**Item**); переход на следующий уровень 
* Перейти на следующий уровень (**Go to Next Level**) - данное действие доступно только после открытия клетки с переходом на следующий уровень
* Открыть/Закрыть инвентарь (**Open/Close Inventory**) - на экране отображается инвентарь персонажа/карта уровня
* Подобрать предмет (**Pick up Item**) - добавить предмет в инвентарь из открытой ячейки с секретом
* Активировать/Деактивировать предмет (**Enable/Disable Item**) - сделать предмет из инвентаря активным/неактивным, что может изменить значения характеристик персонажа
## Композиция
В системе есть 4 основных компонента:
* **Keyboard Handler** - компонент, который отслеживает пользовательский ввод и передаёт управление компоненту **Game Controller**
* **Game Controller** - компонент, который реализует интерфейс **IController**. Данный компонент обрабатывает выбранное действие игрока и передаёт компоненту **Game State** соответствующую команду обновить состояние, а также передаёт компоненту **Display** соответствующую команду для обновления отображаемого на экране.
* **Game State** - компонент, реализующий интерфейс **IState**. Данный компонент хранит текущее состояние игровой сессии: карту текущего уровня, инвентарь персонажа с предметами и т.д.
* **Display** - компонент, реализующий интерфейс **IDisplay**. При вызове соответствующего метода данного компонента на экране отображается либо карта текущего уровня, либо инвентарь персонажа с собранными предметами.
## Логическая структура
* Интерфейс **IController** содержит метод для обработки события ввода с клавиатуры. Данный интерфейс реализуется класс **Game Controller**.
* Интерфейс **IState** содержит методы для изменения состояния игровой сессии. Данный интерфейс реализует класс **Game State**. В классе **Game State** хранятся карта текущего уровня **Map** и информация об игровом персонаже **Character**.
* **Map** соответствует карте текущего уровня, которая состоит из клеток **Cell**. В клетке **Cell** хранится информация о типе клетки **Cell Type** и предмете **Item**, если он там есть. Для предмета храним информацию об эффектах, которые он оказывает на характеристики персонажа, когда предмет активен.
* **Character** соответствует игровому персонажу, для него хранится информация о текущем положении на карте, инвентаре **Inventory** с активными/неактивными предметами **Item** и текущими характеристиками персонажа.
* Каждый из указанных классов имеет метод **getView()**, который возвращает объект, реализующий интерфейс **IView** для отображения на экране.
* Интерфейс **IDisplay** содержит методы для отображения текущего состояния игровой сессии и инвентаря персонажа.
## Взаимодействия и состояния
В общем случае взаимодействие между компонентами выглядит следующим образом:
* Пользователь нажимает на клавишу на клавиатуре
* Информацию о нажатии клавиши приходит в **Keyboard Handler**
* Далее событие нажатии клавиши обрабатывает **Game Controller**
* При необходимости происходит обновление в текущем игровом состоянии **Game State** и отображаемом на экране **Display**
* После обновления всех необходимых сущностей обработка события завершается
